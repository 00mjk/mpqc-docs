<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MPQC: The KeyVal Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MPQC
   &#160;<span id="projectnumber">3.0.0-alpha</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('keyval.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">The KeyVal Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The KeyVal class provides a means for users to associate keywords with values. ParsedKeyVal is a specialization of KeyVal that permits keyword/value associations in text such as an input file or a command line string.</p>
<p>The package is flexible enough to allow complex structures and arrays as well as objects to be read from an input file.</p>
<ul>
<li>
<a class="el" href="keyval.html#keyvalass">Assignment</a> </li>
<li>
<a class="el" href="keyval.html#keyvalgroup">Keyword Grouping</a> </li>
<li>
<a class="el" href="keyval.html#keyvalarray">Array Construction</a> </li>
<li>
<a class="el" href="keyval.html#keyvaltab">Table Construction</a> </li>
<li>
<a class="el" href="keyval.html#keyvalexp">Expression Evaluation</a> </li>
<li>
<a class="el" href="keyval.html#keyvalobj">Objects</a> </li>
</ul>
<h1><a class="anchor" id="keyvalass"></a>
Assignment</h1>
<p>As an example of the use of ParsedKeyVal, consider the following input: </p><pre>
x_coordinate = 1.0
y_coordinate = 2.0
x_coordinate = 3.0
</pre><p> Two assignements will be made. The keyword <code>x_coordinate</code> will be associated with the value <code>1.0</code> and the keyword <code>y_coordinate</code> will be assigned to <code>2.0</code>. The third line in the above input will have no effect since <code>x_coordinate</code> was assigned previously.</p>
<h1><a class="anchor" id="keyvalgroup"></a>
Keyword Grouping</h1>
<p>Lets imagine that we have a program which needs to read in the characteristics of animals. There are lots of animals so it might be nice to catagorize them by their family. Here is a sample format for such an input file: </p><pre>
reptile: (
  alligator: (
    legs = 4
    extinct = no
    )
  python: (
    legs = 0
    extinct = no
    )
  )
bird: (
  owl: (
    flys = yes
    extinct = no
    )
  )
</pre><p>This sample illustrates the use of keyword <code>=</code> value assignments and the keyword grouping operators <code>(</code> and <code>)</code>. The keywords in this example are </p><pre>
reptile:alligator:legs
reptile:alligator:extinct
reptile:alligator:legs
reptile:python:size
reptile:python:extinct
bird:owl:flys
bird:owl:extinct
</pre><p>The <code>:</code>'s occuring in these keywords break the keywords into smaller logical units called keyword segments. The sole purpose of this is to allow persons writing input files to group the input into easy to read sections. In the above example there are two main sections, the reptile section and the bird section. The reptile section takes the form <code>reptile</code> <code>:</code> <code>(</code> keyword <code>=</code> value assignments <code>)</code>. Each of the keywords found between the parentheses has the <code>reptile:</code> prefix attached to it. Within each of these sections further keyword groupings can be used, as many and as deeply nested as the user wants.</p>
<p>Keyword grouping is also useful when you need many different programs to read from the same input file. Each program can be assigned its own unique section.</p>
<h1><a class="anchor" id="keyvalarray"></a>
Array Construction</h1>
<p>Input for an array is specified in the input by forming a keyword group. The name of the group is the name of the array and the grouped keywords are the integers <img class="formulaInl" alt="$i$" src="form_2.png"/>, such that <img class="formulaInl" alt="$0 \leq i &lt; n$" src="form_3.png"/>, where <img class="formulaInl" alt="$n$" src="form_172.png"/> is the number of elements in the array. For example, an array, called <code>array</code>, of length 3 could be given as follows: </p><pre>
array: (
  0 = 5.4
  1 = 8.9
  2 = 3.7
  )
</pre><p> The numbers <code>0</code>, <code>1</code>, and <code>2</code> in this example are keyword segments which serve as indices of <code>array</code>. However, this syntax is somewhat awkward and array construction operators have been provided to simplify the input for this case. The following input is equivalent to the above input: </p><pre>
array = [ 5.4 8.9 3.7 ]
</pre><p>More complex arrays than this can be imagined. Suppose an array of complex numbers is needed. For example the input </p><pre>
carray: (
  0: ( r = 1.0  i = 0.0 )
  1: ( r = 0.0  i = 1.0 )
  )
</pre><p> could be written as </p><pre>
carray: [
  (r = 1.0 i = 0.0)
  (r = 0.0 i = 1.0)
  ]
</pre><p> which looks a bit nicer than the example without array construction operators.</p>
<p>Furthermore, the array construction operators can be nested in about every imaginable way. This allows multidimensional arrays of complicated data to be represented. Here is an example of input for a lower triangular array: </p><pre>
ltriarray = [ [ 5.4  ]
              [ 0.0 2.8 ]
              [ 0.1 0.0 3.7 ] ]
</pre><h1><a class="anchor" id="keyvaltab"></a>
Table Construction</h1>
<p>Although the array construction operators will suit most requirements for enumerated lists of data, in some cases the input can still look ugly. This can, in some cases, be fixed with the table construction operators, <code>{</code> and <code>}</code>.</p>
<p>Suppose a few long vectors of the same length are needed and the data in the <code>i</code>th element of each array is related or somehow belong together. If the arrays are so long that the width of a page is exceeded, then data that should be seen next to each other are no longer adjacent. The way this problem can be fixed is to arrange the data vertically side by side rather than horizontally. The table construction operators allows the user to achieve this in a very simple manner. </p><pre>
balls: (
  color    = [  red      blue     red   ]
  diameter = [   12       14       11   ]
  material = [  rubber  vinyl   plastic ]
  bounces  = [  yes      no       no    ]
  coordinate = [[ 0.0  0.0  0.0]
                [ 1.0  2.0 -1.0]
                [ 1.0 -1.0  1.0]]
  )
</pre><p> can be written </p><pre>
balls: (
  { color diameter material bounces     coordinate} =
  {  red     12    rubber    yes     [ 0.0  0.0  0.0]
     blue    14    vinyl     no      [ 1.0  2.0 -1.0]
     red     11    plastic   no      [ 1.0 -1.0  1.0] }
  )
</pre><p> The length and width of the table can be anything the user desires.</p>
<pre>Value Substitution</pre><p>Occasionally, a user may need to repeat some value several times in an input file. If the value must be changed, it would be nice to only change the value in one place. The value substitution feature of ParsedKeyVal allows the user to do this. Any place a value can occur the user can place a <code>$</code>. Following this a keyword must be given. This keyword must have been assigned before the attempt is made to use its value in a value substitution.</p>
<p>Here is an example illustrating most of the variable substition features: </p><pre>
default:linewidth = 130
testsub: (
  ke: (
    ke_1 = 1
    ke_2 = 2
    ke_3: (
      ke_31 = 31
      ke_32 = 32
      )
    )
  kx = $ke
  r1 = 3.0
  r2 = $r1
  linewidth = $:default:linewidth
  )
</pre><p> is the same as specifying </p><pre>
testsub: (
  ke: (
    ke_1 = 1
    ke_3: (
      ke_31 = 31
      ke_32 = 32
      )
    ke_2 = 2
    )
  linewidth = 130
  r2 = 3.0
  r1 = 3.0
  kx: (
    ke_1 = 1
    ke_2 = 2
    ke_3: (
      ke_31 = 31
      ke_32 = 32
      )
    )
  )
</pre><p> It can be seen from this that value substitution can result in entire keyword segment hierarchies being copied, as well as simple substitutions.</p>
<h1><a class="anchor" id="keyvalexp"></a>
Expression Evaluation</h1>
<p>Suppose your program requires several parameters <code>x1</code>, <code>x2</code>, and <code>x3</code>. Furthermore, suppose that their ratios remain fixed for all the runs of the program that you desire. It would be best to specify some scale factor in the input that would be the only thing that has to be changed from run to run. If you don't want to or cannot modify the program, then this can be done directly with ParsedKeyVal as follows </p><pre>
scale = 1.234
x1 = ( $:scale *  1.2 )
x2 = ( $:scale *  9.2 )
x3 = ( $:scale * -2.0 )
</pre><p> So we see that to the right of the <code>&lt;tt&gt;=&lt;/tt&gt;'' the characters </code><code>(</code>'' and `&lsquo;<code>)</code>&rsquo;' are the expression construction operators. This is in contrast to their function when they are to the left of the `&lsquo;<code>=</code>&rsquo;', where they are the keyword grouping operators.</p>
<p>The expression must be binary and the data is all converted to double. If you use the expression construction operators to produce data that the program expects to be integer, you will certainly get the wrong answers (unless the desired value happens to be zero).</p>
<h1><a class="anchor" id="keyvalobj"></a>
Objects</h1>
<p>An instance of an object can be specified by surrounding it's classname with the <code>&lt;tt&gt;&lt;&lt;/tt&gt;'' and</code><code>&gt;</code>'' operators immediately after the keyword naming the data.</p>
<p>A pointer to a single object can be associated with multiple keywords by using value substitution. This is accomplished by holding references to all objects once they are read in.</p>
<p>Consider a linked list class, A, which reads from the keyword <code>next</code> a reference to an object of class A. Input for such an object, read from keyword <code>a1</code>, follows: </p><pre>
a1&lt;A&gt;: (
    next&lt;A&gt;: (
        next&lt;B&gt;: (
            bdata = 4
            next&lt;A&gt;:()
            )
        )
    )
a2 = $:a1
</pre><p>The <code>a1</code> list would contain two <code>A</code> objects followed by a <code>B</code> object followed by another <code>A</code> object. The <code>a2</code> list refers to exactly the same object as <code>a1</code> (not a copy of <code>a1</code>). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<hr>
<address>
<small>
Generated at Sun Jan 26 2020 23:24:02 for <a
href="http://www.mpqc.org">MPQC</a>
3.0.0-alpha using the documentation package <a
href="http://www.doxygen.org">Doxygen</a>
1.8.16.
</small>
</address>
</body>
</html>
